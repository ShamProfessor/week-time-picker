# 周时间选择器组件需求对齐文档

## 原始需求

开发一个「week-time-grid」组件，支持以下功能：

1. 支持 Vue 3 和 React 双版本，逻辑一致
2. 核心逻辑抽象在一个无框架依赖的 core 包（TS 编写），Vue 和 React 版本分别调用
3. 外部 API：
   - `v-model`（Vue）或 `value` + `onChange`（React）绑定选中数据
   - 自定义星期标签（周一到周日）
   - 自定义开始/结束小时（如 0-23 或 8-20）
   - 自定义时间间隔（默认一格为1h，可以自定义间隔（15min、30min等），根据时间间隔决定列数
4. 标准输出数据格式：对象数组
5. 支持 npm 发布
6. 核心使用 div 实现，性能强大
7. 包管理使用 pnpm workspace

## 边界确认

### 功能边界

1. 组件展示形式：7行（星期）× N列（小时及细分时间段）的网格
2. 交互方式：支持鼠标点击单元格和拖动选择多个单元格
3. 数据输出：选中的时间段以标准化的对象数组形式输出
4. 自定义配置：
   - 星期标签文本
   - 时间范围（开始小时和结束小时）
   - 时间间隔粒度（15分钟、30分钟、1小时等）

### 技术边界

1. 技术栈：TypeScript + Vue 3 + React 18
2. 包结构：monorepo，使用 pnpm workspace 管理
3. 包拆分：
   - core：核心逻辑，无框架依赖
   - vue：Vue 3 组件封装
   - react：React 18 组件封装
4. 发布方式：支持 npm 发布

## 需求理解

### 组件结构

组件将以网格形式展示一周的时间段，用户可以通过点击或拖动选择特定的时间段。组件的核心是一个二维网格，其中：

- 行代表星期（默认周一到周日，可自定义标签）
- 列代表小时（可自定义范围，如0-23或8-20）
- 单元格代表特定星期的特定时间段
- 时间间隔可自定义（如15分钟、30分钟、1小时），影响列的数量

### 交互逻辑

1. 点击单元格：选中/取消选中该时间段
2. 拖动选择：从起始单元格拖动到结束单元格，选中/取消选中路径上的所有单元格
3. 数据双向绑定：
   - Vue：使用 v-model
   - React：使用 value + onChange

### 数据结构

输出数据格式为对象数组，每个对象代表一个选中的时间段，包含：

```typescript
interface TimeRange {
  dayOfWeek: number; // 0-6，表示周一到周日
  startTime: string; // 格式如 "HH:MM"，表示开始时间
  endTime: string;   // 格式如 "HH:MM"，表示结束时间
}
```

## 疑问澄清

1. **时间选择的连续性**：是否支持跨天的时间段选择？例如，从周一的23:00到周二的01:00。
   - 初步理解：不支持跨天选择，每个选择都限定在同一天内。

2. **选中状态的视觉反馈**：选中的单元格是否需要特定的样式？
   - 初步理解：选中的单元格需要有明显的视觉区分，如背景色变化。

3. **响应式设计**：组件是否需要适应不同屏幕尺寸？
   - 初步理解：组件应该支持基本的响应式，但主要关注功能实现。

4. **辅助功能**：是否需要支持键盘操作或屏幕阅读器等辅助功能？
   - 初步理解：基本的键盘操作支持是必要的，但不是首要目标。

5. **国际化支持**：是否需要考虑不同语言和地区的日期时间格式？
   - 初步理解：组件应该支持自定义星期标签，但不需要复杂的国际化处理。

6. **性能考量**：对于大量单元格的情况（如15分钟间隔，24小时范围），是否有性能优化要求？
   - 初步理解：使用简单的div实现，但需要注意渲染性能，避免不必要的重渲染。